## Способы расчета страхового запаса  

-   Автоматический на основании колебания продаж
-   Полуавтоматический на основании неснижаемого остатка в днях
-   Ручной, на основании неснижаемого остатка в штуках

## Зачем нужен страховой запас?  

Чтобы рассчитать потребность на месяц вперёд, нужно знать, сколько мы продадим за этот месяц.  
  
**Например**, если за прошлые периоды продажи были такими: 60, 30, 55, 65, 50, 40, то средняя скорость продаж в месяц = (60 + 30 + 55 + 65 + 40 + 40) / 6 = 50 штук.  
  
Но если мы заказ на следующий месяц сделаем исходя из прогноза 50 штук, то нам может не хватить товара, если повторятся продажи в 60, 55, 65 штук. Поэтому к средней продаже нужно прибавить страховой запас.  

## От чего зависит страховой запас?  

Страховой запас рассчитывается по формуле и зависит от трех факторов:  
  
**1. Насколько сильно колеблются продажи из месяца в месяц**  
Если мы каждый месяц продаём по 49 - 51 штук, то страховой запас будет меньше, максимум 1 штука.  
  
Средняя величина колебания это сигма или стандартное отклонение. В нашем случае это 11.9 штук, можно посчитать в Экселе функцией СТАНДОТКЛОН.Г.  
Т.е. каждый месяц продажи колеблются в среднем на 11.9 штук в обе стороны.  
  
**2. На какой срок нам нужно посчитать страховой запас**  
Если мы заказываем на срок 2 месяца, страховой запас будет больше. Менее очевидно, но факт в том, что на каждый последующий месяц страховой запас будет меньше, чем в предыдущий. Если на первый месяц нам нужно сверху 10 штук, то на два месяца достаточно будет 14 штук, а не 20.  
**  
3. Насколько мы хотим быть уверены в том, что заказанных товаров нам хватит**  
Математики провели специальные расчеты и выяснили, что если к средней продаже прибавить одно стандартного отклонение, то товара хватит до конца периода с вероятностью 85%.  
  
Т.е. если мы закажем 50 штук, то их нам хватит только с вероятностью 50%.  
  
Но если заказать 50 + 11.9 = 62 штуки, то останется всего 25% вероятности того, что товар закончится на полках.  

> Процент уверенности в том, что товара хватит до конца периода называется **уровнем сервиса**.  
  
> **Z** – это количество стандартных отклонений, которое нужно прибавить к заказу, чтобы получить требуемый уровень.

Зависимость Z от уровня сервиса постоянна и приведена в таблице:  

![Неопределенность времени выполнения заказа](https://thumb.tildacdn.com/tild6365-6166-4334-a438-343966626236/-/resize/560x/-/format/webp/Normal-Distribution_.png)

Уровень сервиса в системе min-max.pro привязывается к АВС-классу товара и меняется на закладке "Расчеты".

![Неопределенность времени выполнения заказа](https://thumb.tildacdn.com/tild6533-3736-4936-b635-643239643961/-/resize/760x/-/format/webp/2020-11-20_14-31-06.png)

Настройки для расчёта стандартного отклонения находятся на закладке "Доп настройки"  

![Неопределенность времени выполнения заказа](https://thumb.tildacdn.com/tild3831-6162-4064-b833-353762653636/-/resize/760x/-/format/webp/2020-11-20_14-36-47.png)

## Расчёт отклонения: выбор периодичности  

В системе min-max.pro периодичность для анализа стандартного отклонения (сигма) выбирается автоматически.  
  
Периодичность, выбранная для анализа продаж, используется для расчёта отклонения только если количество периодов превышает 9. Например, на картинке ниже выбран период для анализа "12 месяцев", значит отклонение будет рассчитано по данным за каждый месяц:

![Неопределенность времени выполнения заказа](https://thumb.tildacdn.com/tild3438-3864-4330-a566-333661656435/-/resize/760x/-/format/webp/2021-02-04_16-50-03.png)

Если же количество периодов выбрано меньшее, программа автоматически уменьшит Периодичность, например, используя День или Неделю вместо Месяца, чтобы увеличить количество периодов.  
  
Это делается потому, что небольшого количество периодов (меньше чем 9) недостаточно, чтобы корректно рассчитать отклонение.  
  
На картинке ниже выбран период анализа 2 месяца. Для расчёта отклонения программа выберет периодичность "День", т.к. 8 недель тоже будет недостаточно.

![Неопределенность времени выполнения заказа](https://thumb.tildacdn.com/tild6634-3463-4463-b532-623665633738/-/resize/760x/-/format/webp/2021-02-04_16-52-47.png)

![Неопределенность времени выполнения заказа](https://thumb.tildacdn.com/tild3431-6161-4330-b033-626561383861/-/resize/760x/-/format/webp/2021-02-04_16-51-56.png)

Можно отказаться от автоматического выбора периодичности, если выставить её вручную на закладке "Доп. настройки / ABC-XYZ классификация" в поле "Периодичность для XYZ-анализа". Если значение не выбрано (поле оставлено пустым), используется автоматический выбор.  

![Неопределенность времени выполнения заказа](https://thumb.tildacdn.com/tild6565-3931-4131-a138-383364383837/-/resize/760x/-/format/webp/2021-02-04_16-58-10.png)

Увидеть использованную периодичность и формулу расчёта стандартного отклонения можно, установив флаг "Вывести комментарий расчёта для "Стд. отклонения" и "Коэфф. вариации".  

## Расчёт отклонения: другие особенности  

Дни, в которые не было продаж, не учитываются программой.  
  
Допустим из 60-ти дней продажи были только в 32-х днях, тогда программа возьмет эти 32 дня и рассчитает Стандартное отклонение (сигма) только по ним. Если установить флаг "Учитывать пустые периоды", тогда программа будет брать все 60 дней, в том числе и дни без продаж.  

![Неопределенность времени выполнения заказа](https://thumb.tildacdn.com/tild6632-6636-4239-b234-626139633961/-/resize/760x/-/format/webp/2021-02-09_10-30-00.png)