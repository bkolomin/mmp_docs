
Давайте кратко пройдёмся по теории, основным терминам и формулам, используемыми в системе min-max.pro для расчёта потребности в товаре.  

## Коротко о главном

Если вам удобней воспринимать теорию визуально, можно посмотреть краткое видео ниже. Но основные формулы пока приведены только в виде текста.  

<iframe width="560" height="315" src="https://www.youtube.com/embed/DA4Zp1VTBCg" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

**Краткое описание принципов:**  

-   Товар заказывается, когда текущий остаток на момент заказа становится меньше чем МИН.
-   МИН рассчитывается автоматически.
-   МИН это количество товара, которого хватит нам на срок до следующего поступления. Если товара хватает на меньший срок — его нужно заказать. Подробнее в статье [Точка заказа, МИН](../Термины/Точка%20заказа,%20МИН.md)
-   Срок до следующего заказа задаётся вручную в поле "Заказ на срок". Подробнее здесь: [Заказ на срок, интервал проверки, частота заказа](../Термины/Заказ%20на%20срок,%20интервал%20проверки,%20частота%20заказа.md). Объем заказа — количество, которое мы планируем продать за этот срок.
-   Потребность это объем заказа минус тот остаток, который ещё будет на складе к моменту поступления товара.
-   Ко всему этому прибавляем неснижаемый остаток и страховой запас. Подробные формулы будут ниже.

  
Посмотреть формулу, по которой непосредственно была рассчитана потребность можно, кликнув дважды левой кнопкой мыши по строке с товаром и выбрав пункт "Расчёты":  

![Неопределенность времени выполнения заказа](https://thumb.tildacdn.com/tild6130-6634-4537-b230-666339653962/-/resize/760x/-/format/webp/2020-11-20_13-59-20.png)

## Настройка системы  

Сроки задаются в настройках отчёта (на закладке Настройки / Основное), но могут быть уточнены для отдельных товаров:  
  
1. Можно задать **сроки в днях**, тогда система будет сама пересчитывать конкретные даты при каждом открытии отчёта:

![Неопределенность времени выполнения заказа](https://thumb.tildacdn.com/tild3937-3831-4731-b230-646136383366/-/resize/760x/-/format/webp/2021-02-04_13-02-49.png)

Нажав на кнопку "Подробнее...", можно увидеть текстовое пояснение и даты, рассчитанные на основании заданных сроков.

![Неопределенность времени выполнения заказа](https://thumb.tildacdn.com/tild6365-3766-4039-a338-643362316362/-/resize/760x/-/format/webp/2021-02-03_11-11-39.png)

2. Можно непосредственно задать **нужные даты**  

![Неопределенность времени выполнения заказа](https://thumb.tildacdn.com/tild6464-6436-4432-b561-613561343365/-/resize/760x/-/format/webp/2021-02-04_13-03-19.png)

По каждому товару сроки задаются в соответствующих колонках:  

![Неопределенность времени выполнения заказа](https://thumb.tildacdn.com/tild3965-6463-4331-a130-383266313963/-/resize/760x/-/format/webp/2021-02-03_11-54-05.png)

## Общая схема расчета потребности  

![Неопределенность времени выполнения заказа](https://thumb.tildacdn.com/tild3066-3033-4930-a138-376365646533/-/resize/760x/-/format/webp/_.png)

**Комментарий к схеме:**  
Для простоты предположим, что товар имеет стабильный спрос, и продается ровно по одной штуке каждый день (1 шт. в 1 день), закупка совершается раз месяц (каждые 30 дней), срок поставки товара 1 неделя (7 дней), сегодня как раз день закупки. Доп. запас не используем, поэтому МАКС совпадает с МИН, но об этом ниже.  
  
Итак, сегодня, при проверке, мы видим, что текущий остаток товара составляет 25 шт. Соответственно, нужно решить, делать заказ сегодня или отложить его до следующего раза через месяц.  
  
**Правило простое: если остатков товара остаётся меньше чем на 37 дней (оставшиеся дни до даты следующего заказа + срок поставки), нужно сделать заказ.  
**  
Действительно, если заказ сделан не будет, то текущих остатков хватит только на 25 дней, а остальные 12 дней полки будут пустыми. Эта ситуация отмечена на рисунке оранжевой линией.  

## Основные термины  

**Срок поставки** - количество дней от даты заказа товара до даты поступления этого товара на склад (в нашем примере 7 дней);  
  
**Интервал проверки** - количество дней от даты заказа товара до даты следующего заказа товара. Этот же интервал проходит от даты поставки товара до следующей даты поставки товара (30 дней);  
  
**MIN (точка заказа)** - количество товара, которого нам хватит до следующей поставки, т.е. на период срока поставки и интервала проверки (47 шт.). Если на складе товара меньше, нужно сделать заказ;  
  
**Неснижаемый остаток** - минимальное количество товара, которое всегда должно оставаться на полках к моменту очередного поступления. Обычно используется в маркетинге, когда, к примеру, вендор требует, чтобы на полке всегда было какое-то количество товара для рекламы (для примера сделаем 10 шт.);  
  
**Страховой запас** - количество товаров, компенсирующее неопределённость спроса за некоторый срок (подробно рассмотрим его в следующей статье, пока будем считать равным нулю);  
  
**Объем заказа** - общее количество товара, требуемое на срок между поступлениями (этот срок равен интервалу проверки и в нашем примере составляет 30 дней с 7-го по 37-й день, объем заказа у нас 30 штук);  
  
**Потребность** - это количество товара в нашем заказе поставщику (22 шт. в первом заказе и 30 шт. во втором);  
  
**Дополнительный запас и MAX** - пока опустим, расскажем подробней отдельно, в конце статьи;  

Потребность, Объем заказа, MIN, MAX и другие показатели рассчитываются автоматически. Но при этом их можно редактировать вручную — тогда программа будет опираться на значения, которые внес пользователь, и производить расчет исходя из них. Ручные корректировки сразу сохраняются в 1с, подробнее в главе "[Ручные МИН-МАКС](https://min-max.pro/school/tpost/ig03anbcn1-ruchnie-min-maks)".  
  
Вернемся к нашей схеме:

![Неопределенность времени выполнения заказа](https://thumb.tildacdn.com/tild3066-3033-4930-a138-376365646533/-/resize/760x/-/format/webp/_.png)

Сегодня делаем заказ товара, который поступит через 7 дней.  
Следующий заказ будет сделан через 30 дней и поступит на 37-й день.  
Неснижаемый остаток — 10 штук (требуется, чтобы не менее этого количества всегда было выставлено на витрине).  
  
Следим за красной линией — графиком остатков товара (пила запасов):  
Текущий день: 25 шт. - остаток на сегодня. Делаем заказ на 22 штуки. Общее количество товара в пути и на складе отмечено зелёной линией.  
7-ой день: 18 шт. - остаток к моменту поступления.  
Заказанный товар поступил, поэтому +22 шт, итого на остатках 40 шт.  
30-ый день: 17 шт. - остаток ко дню следующего заказа. Делаем заказ на 30 шт.  
37-ой день: 10 шт. - неснижаемый остаток на конец периода. Заказ приехал, поэтому + 30 шт., итого: 40 шт.  
  
47 шт. - точка заказ (MIN). Считается как 7 + 30 + 10  
40 шт. - это количество товара, требуемое на период 30 дней так, чтобы к концу срока остался неснижаемый остаток (объем заказа): 30 + 10  
22 шт. - первый заказ: 40 - (25 - 7)  
30 шт. - второй заказ:40 - (17 - 7)  

## Формулы  

В системе автозаказа min-max.pro автоматические и ручные расчеты различаются.  
  
Когда вы задаёте ручной МИН или МАКС, то программа заказывает товар на разницу между МАКС и текущим остатком. Это метод "МИН-МАКС".  
  
Автоматически, когда программа имеет на руках прогноз продаж, формула становится чуть сложнее. Используется термин "Объем заказа", плюс учитывается неснижаемый остаток, страховой запас и расход за срок поставки. Автоматический заказ делается в меньшем количестве, чем заказ до МИН.
  
Ручной МИН и МАКС обычно используют, когда срок поставки относительно небольшой и им можно пренебречь. Подробнее, о том как получаются эти формулы и когда результаты совпадают, а когда нет — описано в этой [статье](https://min-max.pro/blog/tpost/n8eprtdd8e-algoritm-i-formuli-raschyota-zakaza-post).  


**Автоматический расчёт** производится по следующим формулам:  
  
> **MIN** = РасходЗаСрокДоСледующегоПоступления + НеснижаемыйОстаток + СтраховойЗапас  
  
> **СрокДоСледующегоПоступления** = СрокПоставки + ИнтервалПроверки  
  
> **ОбъемЗаказа** = РасходЗаИнтервалПроверки + СтраховойЗапас + ДополнительныйЗапас  
  
> **ОстатокКМоментуПоступления** = ТекущийОстаток - РасходЗаСрокПоставки;  

> **Потребность** = ОбъемЗаказа + НеснижаемыйОстаток - ОстатокКМоментуПоступления


Расчеты на основании **ручных MIN-MAX** проще:  
> **МАХ** = MIN + ДополнительныйЗапас  
> **Потребность** = MAX - ТекущийОстаток  
  
Если MAX не задан, заказ делается до MIN:  
> **Потребность** = MIN - ТекущийОстаток  

![Неопределенность времени выполнения заказа](https://thumb.tildacdn.com/tild6539-3634-4437-b932-323930323331/-/resize/760x/-/format/webp/_____.png)

В системе автозаказа min-max.pro все автоматические расчеты производятся по первым формулам. Если МИН и МАКС задать вручную, потребность будет рассчитана по второму методу.  

## Что такое дополнительный запас и зачем он нужен?  

**Дополнительный запас** – количество товара, заказываемое сверх минимального объема заказа (40 шт в нашем примере), для того, чтобы делать интервалы между заказами больше, пропуская очередные заказы и тем самым уменьшая логистические затраты (например, чтобы заказывать товар не каждый месяц, а раз в 2-3 месяца).

Дополнительный запас применяется у товаров со стабильным спросом: мы точно знаем, что распродадим товар, поэтому закупаем его с запасом двойной партией, чтобы распродать за 2 месяца и следующий заказ сделать через 2 месяца, а не через 1.

## Что такое MAX и зачем он нужен?  

При использовании метода MИН-МАКС, дополнительный запас задаётся через значение МАКС и служит той же цели — пропустить несколько заказов для стабильно продающегося товара.

МАКС рассчитывается по формуле:  
> **МАХ** = MIN + ДополнительныйЗапас